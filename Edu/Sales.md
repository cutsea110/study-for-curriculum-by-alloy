---
title: Sales
---

# 学費の概要

学費は学生を顧客とみなして,大学における主要な売上となる.
入学金や授業料などの売上を立てるとともに請求および入金の処理を表現する.

# 依存モデル

```alloy
private open Base
private open Department
private open Student

private open util/time
```

## 各種列挙値

上位のモデルで使用する列挙値を定義する.

```alloy
enum 学生種別 { 通常学生, 留学生, 編入生, 科目等履修生, 聴講生 }
enum 特待生 { 特S, 特A, 特B, 特C }
sig 勘定科目{
}
```

## 顧客

学生を顧客とみなす.

```alloy
sig 顧客 extends 学生{
	種別 : 学生種別,
	特待区分 : lone 特待生,

	請求先 : lone 関係者,
}
```

## 学費

学費は商品マスタに相当する.
費目は会計上の勘定科目コードに対応する.

```alloy
sig 費目{
	科目コード : 勘定科目,
	入金消込順位 : Int,
}
```

学費基本は入学年度および期,学生種別と特待生区分で決まる部分の学費を定義する.
年度や所属学科や年次に依存していない学費を表す.

```alloy
sig 学費基本{
	入学年度 : 年度,
	期 : 期,

	学生種別 : 学生種別,
	特待区分 : lone 特待生,

	費目 : 費目,
	金額 : Int,

	追加 : 学費オプション,
}
```

学費オプションは年度および期,学生の所属学科と年次によって変わる部分の学費を定義する.

```alloy
sig 学費オプション{
	当該年度 : 年度,
	当該期 : 期,

	学科 : 学科,
	学年 : 年次,	

	金額 : Int,
}
```

## 売上

各学生からの学費が売上あるいは売掛となる.

```alloy
sig 売上{
	売上日 : Time,
	顧客 : 顧客,

	年度 : 年度,
	期 : 期,
}

sig 売上明細{
	売上 : 売上,

	種別 : 費目,
	売上額 : Int,
}
```

## 請求

学費の請求は各顧客学生の請求先に年度,期ごとにまとめて行えるように定義する.

```alloy
sig 請求{
	請求日 : Time,
	請求先 : 関係者, -- 顧客(学生)の請求先
}

sig 請求明細{
	請求 : 請求,

	対象 : 売上明細,
	請求額 : Int,
}
```

## 入金

入金はあくまで銀行のEBなどからの入金として定義する.
誤入金であっても入金データは生成する.

```alloy
sig 入金口座{
}

sig 入金{
	入金日 : Time,
	振込元 : lone 関係者,
	入金額 : Int,

	入金口座 : 入金口座,

	対象 : set 請求明細,
}
```


## 前提

以下にモデルが有効であるための前提を示す.
この前提は運用を含めたシステム全体に対する仮定であり,次の正当性検証の前件となる.


## 仕様および基本設計の正当性検証

上記モデルの満足すべき仕様を以下に示す.
これらの検証により基本設計としてのモデルが正当であることを保証する.
